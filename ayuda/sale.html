<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sale - Undisputed Clothing</title>
    <script src="usuarios.js"></script>
    <script src="productos.js"></script>
    <script src="script.js"></script>
    <link rel="stylesheet" href="style.css">
    <script>
        window.onload = function() {
            var usuarioLogueado = JSON.parse(localStorage.getItem('usuarioLogueado'));
            if (!usuarioLogueado) {
                alert("Debe iniciar sesión para acceder a esta página");
                window.location.href = 'iniciarSesion.html';
            } else {
                cargarProductosEnOferta();
            }
        };

        function agregarAlCarrito(producto) {
            console.log("Producto añadido al carrito:", producto);
        }
    </script>
</head>
<body>
    <header>
        <div class="logo">
            <img src="logito undis-02.png" alt="Undisputed Logo">
        </div>
        <nav>
            <ul class="nav-links">
                <li><a href="index.html">INICIO</a></li>
                <li><a href="shop.html">SHOP</a></li>
                <li><a href="sale.html">SALE</a></li>
                <li><a href="moga_challenge.html">MOGA CHALLENGE</a></li>
            </ul>
        </nav>
        <div class="search-and-icons">
            <form id="search-form">
                <input type="text" placeholder="Buscar" id="search-input">
            </form>
            <a href="iniciarSesion.html">
                <img src="16467.png" alt="Iniciar Sesión" class="icon" onerror="this.style.display='none'">
            </a>
            <a href="carrito.html">
                <img src="carrito.png" alt="Carrito" class="icon" onerror="this.style.display='none'">
            </a>
        </div>
    </header>
    <main>
        <section class="sale-products">
            <h2>SALE</h2>
            <div class="filters">
                <button class="filter-btn">Filtrar <img src="filter-512.webp" alt="Filter Icon"></button>
                <button class="sort-btn">Ordenar por <img src="Orden.png" alt="Sort Icon"></button>
            </div>
            <div id="productos-sale" class="productos-container"></div>
        </section>
    </main>
    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>AYUDA.</h3>
                <ul>
                    <li><a href="faq.html">Preguntas Frecuentes</a></li>
                    <li><a href="contacto.html">Contacto</a></li>
                    <li><a href="envios.html">Envíos</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>LEGALES.</h3>
                <ul>
                    <li><a href="terminos.html">Términos y Condiciones</a></li>
                    <li><a href="privacidad.html">Política de Privacidad</a></li>
                    <li><a href="devoluciones.html">Política de Devoluciones</a></li>
                </ul>
            </div>
            <div class="footer-column footer-logo">
                <img src="logito undis-01.png" alt="Logo">
                <p>&copy; 2024 UNDISPUTED CLOTHING. ALL RIGHTS RESERVED.</p>
            </div>
        </div>
    </footer>
    <script>
        function cargarProductosEnOferta() {
            var contenedor = document.getElementById('productos-sale');
            contenedor.innerHTML = ''; 

            var productosEnOferta = [
                {
                    "Nombre": "Hoodie en Oferta",
                    "Precio": "$80",
                    "PrecioOriginal": "$100",
                    "foto": "https://http2.mlstatic.com/D_NQ_NP_682348-MLA46725921582_072021-O.webp"
                },
                {
                    "Nombre": "Remera en Oferta",
                    "Precio": "$40",
                    "PrecioOriginal": "$50",
                    "foto": "https://tiendaganga.com/wp-content/uploads/2023/02/remeras-con-estampas-scaled.webp"
                },
                {
                    "Nombre": "Baggy en Oferta",
                    "Precio": "$60",
                    "PrecioOriginal": "$70",
                    "foto": "https://oldtree.cl/wp-content/uploads/2023/10/old-tree-baggy-pant-lighblue.jpg"
                },
                {
                    "Nombre": "Gorra en Oferta",
                    "Precio": "$15",
                    "PrecioOriginal": "$20",
                    "foto": "https://http2.mlstatic.com/D_NQ_NP_956937-MLA70192125866_062023-O.webp"
                },
                {
                    "Nombre": "Boxy en Oferta",
                    "Precio": "$25",
                    "PrecioOriginal": "$30",
                    "foto": "https://acdn.mitiendanube.com/stores/001/177/291/products/boxyclassicblanca-espalda-16afc9b372cb4899c417138285399209-640-0.png"
                },
                {
                    "Nombre": "Jeans en Oferta",
                    "Precio": "$75",
                    "PrecioOriginal": "$90",
                    "foto": "https://m.media-amazon.com/images/I/61Iam2zJ4OL._AC_UY1000_.jpg"
                }
            ];

            productosEnOferta.forEach(function(producto) {
                var productoDiv = document.createElement('div');
                productoDiv.className = 'product';

                var img = document.createElement('img');
                img.src = producto.foto;
                img.alt = producto.Nombre;

                var nombre = document.createElement('h3');
                nombre.textContent = producto.Nombre;

                var precioOriginal = document.createElement('span');
                precioOriginal.className = 'precio-original';
                precioOriginal.textContent = producto.PrecioOriginal;

                var precio = document.createElement('span');
                precio.className = 'precio';
                precio.textContent = producto.Precio;

                var precioContainer = document.createElement('p');
                precioContainer.appendChild(precio);
                precioContainer.appendChild(precioOriginal);

                var addToCartBtn = document.createElement('button');
                addToCartBtn.textContent = 'Añadir al carrito';
                addToCartBtn.onclick = function() {
                    agregarAlCarrito(producto);
                };

                productoDiv.appendChild(img);
                productoDiv.appendChild(nombre);
                productoDiv.appendChild(precioContainer);
                productoDiv.appendChild(addToCartBtn);

                contenedor.appendChild(productoDiv);
            });
        }
    </script>
</body>
</html>
